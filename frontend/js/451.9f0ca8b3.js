"use strict";(self["webpackChunktemplate"]=self["webpackChunktemplate"]||[]).push([[451],{1451:function(e,t,l){l.r(t),l.d(t,{default:function(){return Re}});var a=l(6252),s=l(9963),o=l(3577);const n=e=>((0,a.dD)("data-v-0bb29d10"),e=e(),(0,a.Cn)(),e),i=n((()=>(0,a._)("div",{class:"header"},[(0,a._)("h2",null,"User Manager")],-1))),d=n((()=>(0,a._)("hr",null,null,-1))),r={class:"body"},c={class:"actions"},u={class:"row"},p=(0,a.uE)('<div class="col-sm-1" data-v-0bb29d10><label for="filter" data-v-0bb29d10>Filter by</label></div><div class="col-1" data-v-0bb29d10><select name="" id="" class="form-select-sm" data-v-0bb29d10><option value="" data-v-0bb29d10>All</option><option value="" data-v-0bb29d10>Active</option><option value="" data-v-0bb29d10>Inactive</option></select></div><div class="col-4" data-v-0bb29d10></div>',3),h={class:"col-3"},m={class:"col"},b={class:"action-button"},g=n((()=>(0,a._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-person-plus-fill",viewBox:"0 0 16 16"},[(0,a._)("path",{d:"M1 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"}),(0,a._)("path",{"fill-rule":"evenodd",d:"M13.5 5a.5.5 0 0 1 .5.5V7h1.5a.5.5 0 0 1 0 1H14v1.5a.5.5 0 0 1-1 0V8h-1.5a.5.5 0 0 1 0-1H13V5.5a.5.5 0 0 1 .5-.5z"})],-1))),_=n((()=>(0,a._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-person-x-fill",viewBox:"0 0 16 16"},[(0,a._)("path",{"fill-rule":"evenodd",d:"M1 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm6.146-2.854a.5.5 0 0 1 .708 0L14 6.293l1.146-1.147a.5.5 0 0 1 .708.708L14.707 7l1.147 1.146a.5.5 0 0 1-.708.708L14 7.707l-1.146 1.147a.5.5 0 0 1-.708-.708L13.293 7l-1.147-1.146a.5.5 0 0 1 0-.708z"})],-1))),f=n((()=>(0,a._)("hr",null,null,-1))),v={class:"table-responsive-sm"},y={class:"table table-striped table-bordered table-hover"},w=n((()=>(0,a._)("th",null,"Code",-1))),k=n((()=>(0,a._)("th",null,"Name",-1))),U=n((()=>(0,a._)("th",null,"Username",-1))),I=n((()=>(0,a._)("th",null,"Email",-1))),z=n((()=>(0,a._)("th",null,"Mô tả",-1))),A=n((()=>(0,a._)("th",null,"Tổ chức",-1))),x=n((()=>(0,a._)("th",null,"Hành động",-1))),C={class:"col"},M=["value"],L={class:"col"},V={class:"col"},B={class:"col"},Z={class:"col"},P={class:"col"},T={class:"col status"},H=["onClick"],D=["onClick"],E=n((()=>(0,a._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-pen-fill",viewBox:"0 0 16 16"},[(0,a._)("path",{d:"m13.498.795.149-.149a1.207 1.207 0 1 1 1.707 1.708l-.149.148a1.5 1.5 0 0 1-.059 2.059L4.854 14.854a.5.5 0 0 1-.233.131l-4 1a.5.5 0 0 1-.606-.606l1-4a.5.5 0 0 1 .131-.232l9.642-9.642a.5.5 0 0 0-.642.056L6.854 4.854a.5.5 0 1 1-.708-.708L9.44.854A1.5 1.5 0 0 1 11.5.796a1.5 1.5 0 0 1 1.998-.001z"})],-1))),S=[E],j=["onClick"],O=n((()=>(0,a._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-trash3",viewBox:"0 0 16 16"},[(0,a._)("path",{d:"M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5ZM11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H2.506a.58.58 0 0 0-.01 0H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1h-.995a.59.59 0 0 0-.01 0H11Zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5h9.916Zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47ZM8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5Z"})],-1))),q=[O],Y={class:"modal fade",id:"staticBackdrop","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},$={class:"modal-dialog"},K={class:"modal-content"},N=n((()=>(0,a._)("div",{class:"modal-header"},[(0,a._)("h5",{class:"modal-title",id:"staticBackdropLabel"},"Thêm mới"),(0,a._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),F={class:"modal-body"},R={class:"form-floating mb-3"},G=n((()=>(0,a._)("label",{for:"floatingInput"},"Username",-1))),J={class:"form-floating mb-3"},Q=n((()=>(0,a._)("label",{for:"floatingInput"},"Password",-1))),W={class:"form-floating mb-3"},X=n((()=>(0,a._)("label",{for:"floatingInput"},"Họ tên",-1))),ee={class:"form-floating mb-3"},te=n((()=>(0,a._)("label",{for:"floatingInput"},"Email",-1))),le={class:"form-floating mb-3"},ae=n((()=>(0,a._)("label",{for:"floatingInput"},"Mô tả",-1))),se={class:"form-floating mb-3"},oe=n((()=>(0,a._)("label",{for:"floatingInput"},"Mã người dùng",-1))),ne=n((()=>(0,a._)("div",{class:"row"},[(0,a._)("div",{class:"col-3 m-0 p-0"},[(0,a._)("button",{class:"btn btn-outline-success flex-lg-column"},"Thêm mới")])],-1))),ie=n((()=>(0,a._)("div",{class:"modal-footer"},[(0,a._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",id:"close"},"Đóng")],-1))),de={class:"update-modal"},re={class:"modal fade",id:"update-modal","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},ce={class:"modal-dialog"},ue={class:"modal-content"},pe=n((()=>(0,a._)("div",{class:"modal-header"},[(0,a._)("h5",{class:"modal-title",id:"staticBackdropLabel"},"Cập nhật"),(0,a._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),he={class:"modal-body"},me={class:"form-floating mb-3"},be=n((()=>(0,a._)("label",{for:"floatingInput"},"Username",-1))),ge={class:"form-floating mb-3"},_e=n((()=>(0,a._)("label",{for:"floatingInput"},"Password",-1))),fe={class:"form-floating mb-3"},ve=n((()=>(0,a._)("label",{for:"floatingInput"},"Họ tên",-1))),ye={class:"form-floating mb-3"},we=n((()=>(0,a._)("label",{for:"floatingInput"},"Email",-1))),ke={class:"form-floating mb-3"},Ue=n((()=>(0,a._)("label",{for:"floatingInput"},"Mô tả",-1))),Ie={class:"form-floating mb-3"},ze=n((()=>(0,a._)("label",{for:"floatingInput"},"Mã người dùng",-1))),Ae=n((()=>(0,a._)("div",{class:"row"},[(0,a._)("div",{class:"col-3 m-0 p-0"},[(0,a._)("button",{class:"btn btn-outline-success flex-lg-column"},"Cập nhật")])],-1))),xe=n((()=>(0,a._)("div",{class:"modal-footer"},[(0,a._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",id:"close1"},"Đóng")],-1))),Ce={class:"modal fade",id:"detail",tabindex:"-1","aria-labelledby":"detail","aria-hidden":"true"},Me={class:"modal-dialog"},Le={class:"modal-content"},Ve=n((()=>(0,a._)("div",{class:"modal-header"},[(0,a._)("h5",{class:"modal-title",id:"exampleModalLabel"},"Chi tiết"),(0,a._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),Be={class:"modal-body table-responsive-sm"},Ze={class:"row"},Pe={class:"col-7 mb-3"},Te=n((()=>(0,a._)("option",{selected:""},"Danh sách tất cả tổ chức",-1))),He=["value"],De={class:"table table-bordered table-hover"},Ee=n((()=>(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",{class:"col"},"Id"),(0,a._)("th",{class:"col"},"Username"),(0,a._)("th",{class:"col"},"Tổ chức")])],-1))),Se={rowspan:"3"},je={class:"list-group list-group-flush"},Oe=n((()=>(0,a._)("div",{class:"row"},[(0,a._)("div",{class:"col-4"},[(0,a._)("button",{class:"btn btn-outline-success"},"Thêm tổ chức")])],-1))),qe=n((()=>(0,a._)("div",{class:"modal-footer"},[(0,a._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close")],-1)));function Ye(e,t,l,n,E,O){return(0,a.wg)(),(0,a.iD)(a.HY,null,[i,d,(0,a._)("div",r,[(0,a._)("div",c,[(0,a._)("div",u,[p,(0,a._)("div",h,[(0,a.wy)((0,a._)("input",{type:"text",placeholder:"Search ...",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>E.search=e),onInput:t[1]||(t[1]=(...e)=>O.searchUser&&O.searchUser(...e)),onChange:t[2]||(t[2]=(...e)=>O.searchUser&&O.searchUser(...e)),onClick:t[3]||(t[3]=(...e)=>O.searchUser&&O.searchUser(...e))},null,544),[[s.nr,E.search]])]),(0,a._)("div",m,[(0,a._)("p",b,[(0,a._)("button",{class:"btn btn-outline-primary",title:"Create","data-bs-toggle":"modal","data-bs-target":"#staticBackdrop",onClick:t[4]||(t[4]=(0,s.iM)(((...e)=>O.getAllListId&&O.getAllListId(...e)),["prevent"]))},[g,(0,a.Uk)(" Create ")]),(0,a._)("button",{class:"btn btn-outline-danger",title:"Delete",onClick:t[5]||(t[5]=(0,s.iM)(((...e)=>O.getAllListId&&O.getAllListId(...e)),["prevent"]))},[_,(0,a.Uk)(" Remove ")])])]),f,(0,a._)("div",v,[(0,a._)("table",y,[(0,a._)("thead",null,[(0,a._)("th",null,[(0,a._)("input",{type:"checkbox",onClick:t[6]||(t[6]=(...e)=>O.checkAll&&O.checkAll(...e))})]),w,k,U,I,z,A,x]),(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(E.users,(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e.id},[(0,a._)("td",C,[(0,a.wy)((0,a._)("input",{type:"checkbox",value:e.id,"onUpdate:modelValue":t[7]||(t[7]=e=>E.ids=e),class:"check"},null,8,M),[[s.e8,E.ids]])]),(0,a._)("th",L,(0,o.zw)(e.code),1),(0,a._)("td",V,(0,o.zw)(e.name),1),(0,a._)("td",B,(0,o.zw)(e.username),1),(0,a._)("td",Z,(0,o.zw)(e.email),1),(0,a._)("td",P,(0,o.zw)(""==e.description?"N/A":e.description),1),(0,a._)("td",T,[(0,a._)("span",{onClick:(0,s.iM)((t=>E.obj=e),["prevent"]),class:"badge text-bg-success","data-bs-toggle":"modal","data-bs-target":"#detail"},"Chi tiết",8,H)]),(0,a._)("td",null,[(0,a._)("span",null,[(0,a._)("button",{type:"button",onClick:(0,s.iM)((t=>{O.setUser(e),E.id=e.id}),["prevent"]),class:"btn btn-outline-primary",title:"Edit","data-bs-toggle":"modal","data-bs-target":"#update-modal"},S,8,D),(0,a._)("button",{class:"btn btn-outline-danger",title:"Delete",onClick:(0,s.iM)((t=>O.deleteById(e.id)),["prevent"])},q,8,j)])])])))),128))])])])])]),(0,a.Uk)(" "+(0,o.zw)(E.id),1)]),(0,a._)("div",Y,[(0,a._)("div",$,[(0,a._)("div",K,[N,(0,a._)("div",F,[(0,a._)("form",{onSubmit:t[14]||(t[14]=(0,s.iM)((e=>O.createUser()),["prevent"]))},[(0,a._)("div",R,[(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"floatingInput",placeholder:"","onUpdate:modelValue":t[8]||(t[8]=e=>E.user.username=e)},null,512),[[s.nr,E.user.username]]),G]),(0,a._)("div",J,[(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"floatingInput",placeholder:"","onUpdate:modelValue":t[9]||(t[9]=e=>E.user.password=e)},null,512),[[s.nr,E.user.password]]),Q]),(0,a._)("div",W,[(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"floatingInput",placeholder:"","onUpdate:modelValue":t[10]||(t[10]=e=>E.user.name=e)},null,512),[[s.nr,E.user.name]]),X]),(0,a._)("div",ee,[(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"floatingInput",placeholder:"","onUpdate:modelValue":t[11]||(t[11]=e=>E.user.email=e)},null,512),[[s.nr,E.user.email]]),te]),(0,a._)("div",le,[(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"floatingInput",placeholder:"","onUpdate:modelValue":t[12]||(t[12]=e=>E.user.description=e)},null,512),[[s.nr,E.user.description]]),ae]),(0,a._)("div",se,[(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"floatingInput",placeholder:"","onUpdate:modelValue":t[13]||(t[13]=e=>E.user.code=e)},null,512),[[s.nr,E.user.code]]),oe]),ne],32)]),ie])])]),(0,a._)("div",de,[(0,a._)("div",re,[(0,a._)("div",ce,[(0,a._)("div",ue,[pe,(0,a._)("div",he,[(0,a._)("form",{onSubmit:t[21]||(t[21]=(0,s.iM)((e=>O.updateById(E.id)),["prevent"]))},[(0,a._)("div",me,[(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"floatingInput",placeholder:"","onUpdate:modelValue":t[15]||(t[15]=e=>E.updateUser.username=e),readonly:""},null,512),[[s.nr,E.updateUser.username]]),be]),(0,a._)("div",ge,[(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"floatingInput",placeholder:"","onUpdate:modelValue":t[16]||(t[16]=e=>E.updateUser.password=e),hidden:""},null,512),[[s.nr,E.updateUser.password]]),_e]),(0,a._)("div",fe,[(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"floatingInput",placeholder:"","onUpdate:modelValue":t[17]||(t[17]=e=>E.updateUser.name=e)},null,512),[[s.nr,E.updateUser.name]]),ve]),(0,a._)("div",ye,[(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"floatingInput",placeholder:"","onUpdate:modelValue":t[18]||(t[18]=e=>E.updateUser.email=e)},null,512),[[s.nr,E.updateUser.email]]),we]),(0,a._)("div",ke,[(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"floatingInput",placeholder:"","onUpdate:modelValue":t[19]||(t[19]=e=>E.updateUser.description=e)},null,512),[[s.nr,E.updateUser.description]]),Ue]),(0,a._)("div",Ie,[(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"floatingInput",placeholder:"","onUpdate:modelValue":t[20]||(t[20]=e=>E.updateUser.code=e),readonly:""},null,512),[[s.nr,E.updateUser.code]]),ze]),Ae],32)]),xe])])])]),(0,a._)("div",Ce,[(0,a._)("div",Me,[(0,a._)("div",Le,[Ve,(0,a._)("div",Be,[(0,a._)("form",{onSubmit:t[23]||(t[23]=(0,s.iM)((e=>O.addOrganzation(E.obj.id)),["prevent"]))},[(0,a._)("div",Ze,[(0,a._)("div",Pe,[(0,a.wy)((0,a._)("select",{name:"",id:"",class:"form-select","onUpdate:modelValue":t[22]||(t[22]=e=>E.oraId=e)},[Te,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(E.organizationss,(e=>((0,a.wg)(),(0,a.iD)("option",{key:e,value:e.oraId},(0,o.zw)(e.name),9,He)))),128))],512),[[s.bM,E.oraId]])])]),(0,a._)("table",De,[Ee,(0,a._)("tbody",null,[(0,a._)("tr",null,[(0,a._)("th",null,(0,o.zw)(E.obj.id),1),(0,a._)("td",Se,(0,o.zw)(E.obj.username),1),(0,a._)("td",null,[(0,a._)("ul",je,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(E.obj.organizations,(e=>((0,a.wg)(),(0,a.iD)("li",{class:"list-group-item",key:e},(0,o.zw)(e.name),1)))),128))])])])])]),Oe],32)]),qe])])])],64)}l(7658);var $e=l(196),Ke={name:"UserManager",data(){return{users:[],user:{id:null,code:null,name:null,username:null,password:null,email:null,description:null},ids:[],updateUser:{id:null,code:null,name:null,username:null,password:null,email:null,description:null},search:"",id:"",obj:{},organizationss:[],u:{id:null,organizations:[]},oraId:""}},created(){$e.ZP.defaults.headers.common.Authorization="Bearer "+localStorage.getItem("token"),this.getUsers(),this.getAllOrganization(),this.getAccessToken()},methods:{async getUsers(){$e.ZP.get("/api/user/get").then((e=>{this.users=e.data,this.getAccessToken()})).catch((e=>{console.log(e)}))},createUser(){$e.ZP.post("/api/user/save",this.user).then((e=>{e.data,this.getUsers(),document.getElementById("close").click(),this.getAccessToken()})).catch((e=>{console.log(e)}))},getAllListId(){let e=document.querySelectorAll(".check");return e.forEach((e=>{e.checked&&this.ids.push(e.value)})),this.ids},checkAll(){var e=document.querySelector("input[type='checkbox']"),t=document.querySelectorAll(".check");e.checked?t.forEach((e=>{e.checked=!0})):t.forEach((e=>{e.checked=!1}))},deleteById(e){$e.ZP["delete"]("/api/user/delete/"+e).then((e=>{e.data,this.getAccessToken(),this.getUsers()})).catch((e=>{console.log(e),this.$toast.error("Permission denied")}))},deleteAll(){this.getAllListId(),$e.ZP["delete"]("/api/user/deleteAll/"+this.ids).then((e=>{e.data,this.getUsers(),this.getAccessToken()})).catch((e=>{console.log(e)}))},updateById(e){if(null==e)throw Error("Not valid");$e.ZP.put("/api/user/update/"+e,this.updateUser).then((e=>{this.user=e.data,document.querySelector("#close1").click(),this.getAccessToken()})).catch((e=>{console.log(e),this.$toast.error("Permission denied")}))},setUser(e){this.updateUser=e},searchUser(){null!=this.search&&""!=this.search&&void 0!=this.search||this.getUsers(),$e.ZP.get("/api/user/search/"+this.search).then((e=>{this.users=e.data,this.getAccessToken()})).catch((e=>{console.log(e),this.$toast.error("Permission denied")}))},getAllOrganization(){$e.ZP.get("/api/organization/get").then((e=>{this.organizationss=e.data,this.getAccessToken()})).catch((e=>{console.log(e)}))},async getOrganizationById(){$e.ZP.get("/api/organization/get/"+this.oraId).then((async e=>{this.u.organizations.push(e.data),this.getAccessToken()})).catch((e=>{console.log(e)}))},addOrganzation(e){this.getOrganizationById(),alert(this.u.organizations),$e.ZP.post("/api/user/add-org/"+e,this.u.organizations).then((e=>{this.getUsers(),this.obj.organizations=e.data.organizations,this.getAccessToken()})).catch((e=>{console.log(e),this.$toast.error("Permission denied")}))},async getAccessToken(){$e.ZP.post("/api/user/token/refresh").then((async e=>{localStorage.setItem("token",e.data.access_token)})).catch((e=>{console.log(e)}))}}},Ne=l(3744);const Fe=(0,Ne.Z)(Ke,[["render",Ye],["__scopeId","data-v-0bb29d10"]]);var Re=Fe}}]);
//# sourceMappingURL=451.9f0ca8b3.js.map