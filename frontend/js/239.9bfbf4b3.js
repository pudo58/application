"use strict";(self["webpackChunktemplate"]=self["webpackChunktemplate"]||[]).push([[239],{7239:function(e,s,t){t.r(s),t.d(s,{default:function(){return de}});var l=t(6252),a=t(3577),o=t(9963);const i=(0,l._)("div",{class:"header"},[(0,l._)("h2",null,"Organization Manager")],-1),n=(0,l._)("hr",null,null,-1),r={class:"body"},d={class:"actions"},c={class:"row"},u=(0,l.uE)('<div class="col-sm-1"><label for="filter">Filter by</label></div><div class="col-1"><select name="" id="" class="form-select-sm"><option value="">All</option><option value="">Active</option><option value="">Inactive</option></select></div><div class="col-4"></div><div class="col-3"><input type="text" placeholder="Search ..." class="form-control"></div><div class="col"><p class="action-button"><button class="btn btn-outline-primary" title="Create" data-bs-toggle="modal" data-bs-target="#create-modal"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-plus-fill" viewBox="0 0 16 16"><path d="M1 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"></path><path fill-rule="evenodd" d="M13.5 5a.5.5 0 0 1 .5.5V7h1.5a.5.5 0 0 1 0 1H14v1.5a.5.5 0 0 1-1 0V8h-1.5a.5.5 0 0 1 0-1H13V5.5a.5.5 0 0 1 .5-.5z"></path></svg> Create </button><button class="btn btn-outline-danger" title="Delete"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-x-fill" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm6.146-2.854a.5.5 0 0 1 .708 0L14 6.293l1.146-1.147a.5.5 0 0 1 .708.708L14.707 7l1.147 1.146a.5.5 0 0 1-.708.708L14 7.707l-1.146 1.147a.5.5 0 0 1-.708-.708L13.293 7l-1.147-1.146a.5.5 0 0 1 0-.708z"></path></svg> Remove </button></p></div><hr>',6),m={class:"table-responsive-sm"},p={class:"table table-striped table-bordered table-hover"},b=(0,l._)("thead",null,[(0,l._)("th",null,[(0,l._)("input",{type:"checkbox",id:"check"})]),(0,l._)("th",null,"User"),(0,l._)("th",null,"Resource"),(0,l._)("th",null,"View"),(0,l._)("th",null,"Edit"),(0,l._)("th",null,"Delete"),(0,l._)("th",null,"Action")],-1),g=(0,l._)("td",{class:"col"},[(0,l._)("input",{type:"checkbox",id:"check"})],-1),h={class:"col"},v={class:"col"},_={class:"col"},f={class:"col"},w={class:"col"},I=(0,l._)("button",{class:"btn btn-outline-primary",title:"Edit","data-bs-toggle":"modal","data-bs-target":"#staticBackdrop"},[(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-pen-fill",viewBox:"0 0 16 16"},[(0,l._)("path",{d:"m13.498.795.149-.149a1.207 1.207 0 1 1 1.707 1.708l-.149.148a1.5 1.5 0 0 1-.059 2.059L4.854 14.854a.5.5 0 0 1-.233.131l-4 1a.5.5 0 0 1-.606-.606l1-4a.5.5 0 0 1 .131-.232l9.642-9.642a.5.5 0 0 0-.642.056L6.854 4.854a.5.5 0 1 1-.708-.708L9.44.854A1.5 1.5 0 0 1 11.5.796a1.5 1.5 0 0 1 1.998-.001z"})])],-1),y=["onClick"],k=(0,l._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-trash3",viewBox:"0 0 16 16"},[(0,l._)("path",{d:"M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5ZM11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H2.506a.58.58 0 0 0-.01 0H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1h-.995a.59.59 0 0 0-.01 0H11Zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5h9.916Zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47ZM8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5Z"})],-1),x=[k],P={class:"modal fade",id:"create-modal","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"create-modal","aria-hidden":"true"},z={class:"modal-dialog"},C={class:"modal-content"},M=(0,l._)("div",{class:"modal-header"},[(0,l._)("h5",{class:"modal-title",id:"staticBackdropLabel"},"Modal title"),(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Z={class:"modal-body"},A={class:"form-floating mb-3"},D=(0,l._)("option",{selected:"",disabled:""},"Select User",-1),H=["value"],U=(0,l._)("label",{for:"floatingInput"},"User",-1),V={class:"form-floating mb-3"},B=(0,l._)("option",{selected:"",disabled:""},"Select Resource",-1),L=["value"],E=(0,l._)("label",{for:"floatingInput"},"Resource",-1),R={class:"form-floating mb-3"},S=(0,l._)("option",{selected:"",disabled:""},"View",-1),F=(0,l._)("option",{value:"true"},"True",-1),T=(0,l._)("option",{value:"false"},"False",-1),Y=[S,F,T],K=(0,l._)("label",{for:"floatingInput"},"View",-1),$={class:"form-floating mb-3"},N=(0,l._)("option",{selected:"",disabled:""},"Edit",-1),O=(0,l._)("option",{value:"true"},"True",-1),j=(0,l._)("option",{value:"false"},"False",-1),q=[N,O,j],G=(0,l._)("label",{for:"floatingInput"},"Edit",-1),J={class:"form-floating mb-3"},Q=(0,l._)("option",{selected:"",disabled:""},"Delete",-1),W=(0,l._)("option",{value:"true"},"True",-1),X=(0,l._)("option",{value:"false"},"False",-1),ee=[Q,W,X],se=(0,l._)("label",{for:"floatingInput"},"Delete",-1),te=(0,l._)("div",{class:"row"},[(0,l._)("div",{class:"col-2"},[(0,l._)("button",{class:"btn btn-outline-success"},"Create")])],-1),le=(0,l._)("div",{class:"modal-footer"},[(0,l._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",id:"close"},"Close")],-1);function ae(e,s,t,k,S,F){return(0,l.wg)(),(0,l.iD)(l.HY,null,[i,n,(0,l._)("div",r,[(0,l._)("div",d,[(0,l._)("div",c,[u,(0,l._)("div",m,[(0,l._)("table",p,[b,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(S.permissions,(e=>((0,l.wg)(),(0,l.iD)("tr",{key:e},[g,(0,l._)("td",h,(0,a.zw)(F.findUsernameById(e.user.userId)),1),(0,l._)("td",v,(0,a.zw)(e.resource.name),1),(0,l._)("td",_,[(0,l._)("span",{class:(0,a.C_)({"badge text-bg-success":1==e.view,"badge text-bg-danger":0==e.view})},(0,a.zw)(e.view),3)]),(0,l._)("td",f,[(0,l._)("span",{class:(0,a.C_)({"badge text-bg-success":1==e.edit,"badge text-bg-danger":0==e.edit})},(0,a.zw)(e.edit),3)]),(0,l._)("td",w,[(0,l._)("span",{class:(0,a.C_)({"badge text-bg-success":1==e.delete,"badge text-bg-danger":0==e.delete})},(0,a.zw)(e.delete),3)]),(0,l._)("td",null,[(0,l._)("span",null,[I,(0,l._)("button",{class:"btn btn-outline-danger",title:"Delete",onClick:(0,o.iM)((s=>F.deletePermission(e.permission)),["prevent"])},x,8,y)])])])))),128))])])])])])]),(0,l._)("div",P,[(0,l._)("div",z,[(0,l._)("div",C,[M,(0,l._)("div",Z,[(0,l._)("form",{onSubmit:s[5]||(s[5]=(0,o.iM)(((...e)=>F.createPermission&&F.createPermission(...e)),["prevent"]))},[(0,l._)("div",A,[(0,l.wy)((0,l._)("select",{id:"floatingInput",class:"form-select","onUpdate:modelValue":s[0]||(s[0]=e=>S.permission.user.userId=e)},[D,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(S.users,(e=>((0,l.wg)(),(0,l.iD)("option",{key:e,value:e.userId},(0,a.zw)(e.username),9,H)))),128))],512),[[o.bM,S.permission.user.userId]]),U]),(0,l._)("div",V,[(0,l.wy)((0,l._)("select",{id:"floatingInput",class:"form-select","onUpdate:modelValue":s[1]||(s[1]=e=>S.permission.resource.resourceId=e)},[B,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(S.resources,(e=>((0,l.wg)(),(0,l.iD)("option",{key:e,value:e.resourceId},(0,a.zw)(e.name),9,L)))),128))],512),[[o.bM,S.permission.resource.resourceId]]),E]),(0,l._)("div",R,[(0,l.wy)((0,l._)("select",{id:"floatingInput",class:"form-select","onUpdate:modelValue":s[2]||(s[2]=e=>S.permission.view=e)},Y,512),[[o.bM,S.permission.view]]),K]),(0,l._)("div",$,[(0,l.wy)((0,l._)("select",{id:"floatingInput",class:"form-select","onUpdate:modelValue":s[3]||(s[3]=e=>S.permission.edit=e)},q,512),[[o.bM,S.permission.edit]]),G]),(0,l._)("div",J,[(0,l.wy)((0,l._)("select",{id:"floatingInput",class:"form-select","onUpdate:modelValue":s[4]||(s[4]=e=>S.permission.delete=e)},ee,512),[[o.bM,S.permission.delete]]),se]),te],32)]),le])])])],64)}var oe=t(196),ie={name:"PermissionManager",data(){return{permissions:[],permission:{user:{userId:""},resource:{resourceId:""},view:"",edit:"",delete:""},users:[],resources:[]}},methods:{getPermissions(){oe.ZP.defaults.headers.common.Authorization="Bearer "+localStorage.getItem("token"),console.log(document.cookie["token"]),oe.ZP.get("/api/permission/get",document.cookie).then((e=>{this.permissions=e.data})).catch((e=>{console.log(e),this.$toast.error("Permission denied")}))},createPermission(){oe.ZP.post("/api/permission/save",this.permission).then((e=>{this.getPermissions(),this.$toast.success("Thêm mới thành công"),document.getElementById("close").click()})).catch((e=>{console.log(e)}))},getAllUser(){oe.ZP.get("/api/user/get").then((e=>{this.users=e.data})).catch((e=>{console.log(e)}))},getAllResource(){oe.ZP.get("/api/resource/get").then((e=>{this.resources=e.data})).catch((e=>{console.log(e)}))},deletePermission(e){oe.ZP["delete"]("/api/permission/delete/"+e,document.cookie).then((e=>{this.getPermissions()})).catch((e=>{console.log(e)}))},findUsernameById(e){let s="";return this.users.forEach((t=>{t.userId==e&&(s=t.username)})),s},findResourceNameById(e){let s="";return this.resources.forEach((t=>{t.resourceId==e&&(s=t.name)})),s}},mounted(){this.getPermissions(),this.getAllUser(),this.getAllResource()}},ne=t(3744);const re=(0,ne.Z)(ie,[["render",ae]]);var de=re}}]);
//# sourceMappingURL=239.9bfbf4b3.js.map